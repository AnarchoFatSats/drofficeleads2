version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo "ðŸ¥ Deploying Cura Genesis CRM - FULL ENHANCED DASHBOARD"
        - echo "âœ… Complete admin/manager/agent features"
        - echo "âœ… Team management and analytics"
    build:
      commands:
        - echo "ðŸš€ Building FULL CRM with enhanced dashboard..."
        # Deploy the ENHANCED dashboard with all admin features
        - cp crm_enhanced_dashboard_v2.html index.html
        # Copy updated config files
        - cp web/config.js config.js || echo "Config file copied"
        - cp manifest.json . || echo "manifest.json not found, skipping"
        # Copy web assets
        - mkdir -p data
        - cp web/data/*.json data/ 2>/dev/null || echo "Creating empty data files for fallback"
        - echo '{"leads":[],"total":0}' > data/hot_leads.json
        - echo '{"summary":{"total_leads":0}}' > data/summary.json
        - echo '{"regions":[]}' > data/regions.json
        - ls -la
        - echo "âœ… ENHANCED CRM Dashboard Ready - Full Admin Features"
    postBuild:
      commands:
        - echo "ðŸŽ‰ FULL CRM SYSTEM DEPLOYED!"
        - 'echo "ðŸ”¥ Admin Features: Team management, user creation, analytics"'
        - 'echo "ðŸ”¥ Manager Features: Team oversight, performance tracking"'  
        - 'echo "ðŸ”¥ Agent Features: Lead management, gamification"'
        - 'echo "âœ… Authentication - Multi-role JWT System"'
        - 'echo "âœ… Real-time Data - Live API Integration"'
        - 'echo "âœ… Security - HTTPS only, role-based permissions"'
  artifacts:
    baseDirectory: .
    files:
      - 'index.html'
      - 'config.js'
      - 'manifest.json'
      - 'data/*.json'
  cache:
    paths: [] # Force fresh deployment with enhanced dashboard
